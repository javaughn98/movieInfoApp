<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Movie Info</title>
        <link rel="stylesheet" type="text/css" href="https://bootswatch.com/4/cyborg/bootstrap.min.css">
        <link rel="stylesheet" type="text/css" href="css/movieStyle.css">

        <script src="js/jquery.min.js"></script>
        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
        
        
        
        <script>
            // retreive the movie ID form the browser storage session
            function getMovie() {
                let movieID = sessionStorage.getItem('movieID');
        
                // request the movie from the api by the ID number so we can get all the movie details
                axios.get('http://www.omdbapi.com/?apikey=751d2db1&i='+movieID)
                .then((response) => {
                console.log(response);
                let movie = response.data;

                console.log(movie);
                let output = `
                <div class="container">
                    <div class="row">
                            <div class="col-md-4"> 
                                <img src="${movie.Poster}" class="thumbnail">
                            </div>
                            <div class="col-md-8">
                                <h2>${movie.Title}</h2>
                                <ul class="list-group">
                                    <li class="item"><strong>Released:</strong>${movie.Released}</li>
                                    <li class="item"><strong>Genre:</strong>${movie.Genre}</li>
                                    <li class="item"><strong>Rating:</strong>${movie.Rated}</li>
                                    <li class="item"><strong>IMDB Rating:</strong>${movie.imdbRating}</li>
                                    <li class="item"><strong>Director:</strong>${movie.Director}</li>
                                    <li class="item"><strong>Writer:</strong>${movie.Writer}</li>
                                    <li class="item"><strong>Actors:</strong>${movie.Actors}</li>

                                </ul>
                            <div>
                    </div>


                    <div class="row">
                            <div class="well">
                                <h3>Plot</h3>
                                ${movie.Plot}
                                <hr>
                                    <a class="btn btn-primary" href="http://imdb.com/title/${movie.imdbID}" target="_blank">Veiw on IMDB</a>
                                    <a class="btn btn-secondary" href="index.html">Back to Search</a>            
                                </hr>
                            </div>
                    </div>
                </div>
                `; 

                $('#movie').html(output);
                })
                .catch((err) => {
                    console.log(err);
                });

            }
        </script>
        <script>
            getMovie();
        </script>
    </head>

    <body>
        <nav class="navbar navbar-default">
            <div class="container">
                <div class="navbar-header">
                    <a class="navbar-brand" href="index.html">Movie Info</a>
                </div>
            </div>
        </nav>

        <div class="container">
            <div id="movie" class="well">

            </div>

        </div>
        
        <script src="js/script.js"></script>
        
        
    </body>
</html>